# Chat System

–°–∏—Å—Ç–µ–º–∞ —á–∞—Ç—É –¥–ª—è –∞—Ä–µ–Ω –≤ Gradient Pillars –ø–ª–∞–≥—ñ–Ω—ñ.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
chat/
‚îú‚îÄ‚îÄ ChatManager.java       - –ì–æ–ª–æ–≤–Ω–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä —á–∞—Ç—É
‚îú‚îÄ‚îÄ ChatFormatter.java     - –§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
‚îî‚îÄ‚îÄ PrefixProvider.java    - –û—Ç—Ä–∏–º–∞–Ω–Ω—è –ø—Ä–µ—Ñ—ñ–∫—Å—ñ–≤ —á–µ—Ä–µ–∑ Vault
```

## –ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

### 1. –Ü–∑–æ–ª—å–æ–≤–∞–Ω–∏–π —á–∞—Ç –∞—Ä–µ–Ω–∏
- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≥—Ä–∞–≤—Ü—ñ–≤ –Ω–∞ –∞—Ä–µ–Ω—ñ –≤–∏–¥–∏–º—ñ **—Ç—ñ–ª—å–∫–∏** –≥—Ä–∞–≤—Ü—è–º —Ü—ñ—î—ó –∞—Ä–µ–Ω–∏
- –ì—Ä–∞–≤—Ü—ñ –ø–æ–∑–∞ –∞—Ä–µ–Ω–æ—é –±–∞—á–∞—Ç—å –≥–ª–æ–±–∞–ª—å–Ω–∏–π —á–∞—Ç
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –¥–æ —è–∫–æ—ó –∞—Ä–µ–Ω–∏ –Ω–∞–ª–µ–∂–∏—Ç—å –≥—Ä–∞–≤–µ—Ü—å

### 2. –ü—Ä–µ—Ñ—ñ–∫—Å–∏ –≥—Ä–∞–≤—Ü—ñ–≤
- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ **Vault** –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø—Ä–µ—Ñ—ñ–∫—Å—ñ–≤
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ **LuckPerms** –ø—Ä–µ—Ñ—ñ–∫—Å—ñ–≤
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ **legacy –∫–æ–ª—å–æ—Ä—ñ–≤** (&a, &c —Ç–æ—â–æ)
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ **MiniMessage** —Ñ–æ—Ä–º–∞—Ç—ñ–≤ (<gradient>, <color> —Ç–æ—â–æ)

### 3. –§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

**–ù–∞ –∞—Ä–µ–Ω—ñ:**
```
[Arena] [Prefix] PlayerName: message
```
- `[Arena]` - –Ω–∞–∑–≤–∞ –∞—Ä–µ–Ω–∏ –∑ –∫–æ–ª—å–æ—Ä–æ–º –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Å—Ç–∞–Ω—É:
  - üü¢ WAITING - –∑–µ–ª–µ–Ω–∏–π
  - üü° COUNTDOWN - –∂–æ–≤—Ç–∏–π
  - üî¥ ACTIVE - —á–µ—Ä–≤–æ–Ω–∏–π
  - üü† ENDING - –∑–æ–ª–æ—Ç–∏–π

**–ì–ª–æ–±–∞–ª—å–Ω–∏–π —á–∞—Ç:**
```
[Prefix] PlayerName: message
```

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ (pom.xml)
```xml
<dependency>
    <groupId>com.github.MilkBowl</groupId>
    <artifactId>VaultAPI</artifactId>
    <version>1.7.1</version>
    <scope>provided</scope>
</dependency>
```

### Plugin.yml
```yaml
softdepend: [PlaceholderAPI, Vault]
```

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —Ä–æ–±–æ—Ç–∞
–°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞—Ü—é—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—ñ—Å–ª—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó `ChatListener`:
```java
getServer().getPluginManager().registerEvents(new ChatListener(this), this);
```

### API

**–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–∞ –∞—Ä–µ–Ω—É:**
```java
ChatManager chatManager = plugin.getChatManager();
chatManager.handleArenaChat(player, "Hello!");
```

**–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å Vault:**
```java
boolean hasVault = chatManager.getFormatter()
    .getPrefixProvider()
    .isVaultChatAvailable();
```

## –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π —á–∞—Ç
–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î Paper API `AsyncChatEvent` –¥–ª—è –æ–±—Ä–æ–±–∫–∏ —á–∞—Ç—É –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º—É —Ä–µ–∂–∏–º—ñ. –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –∑ –æ—Å–Ω–æ–≤–Ω–∏–º –ø–æ—Ç–æ–∫–æ–º –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è —á–µ—Ä–µ–∑ `runTask()` –¥–ª—è –±–µ–∑–ø–µ—á–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ –∑ `Game` –æ–±'—î–∫—Ç–∞–º–∏.

### –ü—Ä–µ—Ñ—ñ–∫—Å–∏
1. –°–ø–æ—á–∞—Ç–∫—É –æ—Ç—Ä–∏–º—É—î –ø—Ä–µ—Ñ—ñ–∫—Å —á–µ—Ä–µ–∑ Vault Chat API
2. –ö–æ–Ω–≤–µ—Ä—Ç—É—î legacy –∫–æ–¥–∏ (&) –≤ Component
3. –ù–∞–º–∞–≥–∞—î—Ç—å—Å—è –æ–±—Ä–æ–±–∏—Ç–∏ MiniMessage —Ç–µ–≥–∏
4. –ü—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ –ø–æ–≤–µ—Ä—Ç–∞—î legacy –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

### Fallback
–Ø–∫—â–æ Vault –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∞–±–æ –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ:
- –ü—Ä–µ—Ñ—ñ–∫—Å –±—É–¥–µ –ø–æ—Ä–æ–∂–Ω—ñ–º
- –ß–∞—Ç –≤—Å–µ –æ–¥–Ω–æ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏–º–µ
- –í –ª–æ–≥–∞—Ö –∑'—è–≤–∏—Ç—å—Å—è –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ –ø–ª–∞–≥—ñ–Ω–∞

## –ü—Ä–∏–∫–ª–∞–¥–∏ —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è

**–ó LuckPerms –ø—Ä–µ—Ñ—ñ–∫—Å–æ–º:**
```
[TestArena] [Admin] xlanyleeet: Hello everyone!
```

**–ë–µ–∑ –ø—Ä–µ—Ñ—ñ–∫—Å—É:**
```
[TestArena] PlayerName: Hi!
```

**–ì–ª–æ–±–∞–ª—å–Ω–∏–π —á–∞—Ç:**
```
[VIP] Player123: Anyone want to play?
```

## –ú–æ–∂–ª–∏–≤—ñ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è

1. **–ö–æ–º–∞–Ω–¥–∏ —á–∞—Ç—É** - `/ac <message>` –¥–ª—è —á–∞—Ç—É –∞—Ä–µ–Ω–∏
2. **Spy —Ä–µ–∂–∏–º** - –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∏ –±–∞—á–∞—Ç—å —á–∞—Ç –≤—Å—ñ—Ö –∞—Ä–µ–Ω
3. **–§—ñ–ª—å—Ç—Ä —Å–ª—ñ–≤** - –±–ª–æ–∫—É–≤–∞–Ω–Ω—è –Ω–µ–±–∞–∂–∞–Ω–∏—Ö —Å–ª—ñ–≤
4. **–Ü—Å—Ç–æ—Ä—ñ—è —á–∞—Ç—É** - –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
5. **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ñ–æ—Ä–º–∞—Ç—É** - —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é
